<%- include('../includes/head.ejs') %>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<main>
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-2xl font-bold mb-6">Gráficas Dinámicas</h1>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-xl font-semibold mb-4">Gráfica de Barras</h2>
                <canvas id="barChart"></canvas>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-xl font-semibold mb-4">Gráfica de Pastel</h2>
                <canvas id="pieChart"></canvas>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-xl font-semibold mb-4">Gráfica de Barras Horizontal</h2>
                <canvas id="horizontalBarChart"></canvas>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-xl font-semibold mb-4">Grafica de Linea</h2>
                <canvas id="lineChart"></canvas>
            </div>
        </div>
    </div>
</main>

<script>

  const barData = {
            labels: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo'],
            datasets: [{
                label: 'Ventas',
                data: [19, 13, 15, 12, 9],
                backgroundColor: [
                    '#9333EA',
                    '#A855F7',
                    '#C084FC',
                    '#9333EA',
                    '#A855F7'
                ],
                borderColor: [
                    '#9333EA',
                    '#A855F7',
                    '#C084FC',
                    '#9333EA',
                    '#A855F7'
                ],
                borderWidth: 1
            }]
        };

        const barConfig = {
            type: 'bar',
            data: barData,
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        };

        const barChart = new Chart(document.getElementById('barChart'), barConfig);

        const pieData = {
            labels: ['Josue', 'Mario', 'Gonzalo'],
            datasets: [{
                label: 'Horas',
                data: [10, 20, 30],
                backgroundColor: [
                    '#9333EA',
                    '#A855F7',
                    '#C084FC'
                ],
                borderColor: [
                    '#9333EA',
                    '#A855F7',
                    '#C084FC'
                ],
                borderWidth: 1
            }]
        };

        const pieConfig = {
            type: 'pie',
            data: pieData
        };

        const pieChart = new Chart(document.getElementById('pieChart'), pieConfig);
        
        const horizontalBarData = {
            labels: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo'],
            datasets: [{
                label: 'Ventas',
                data: [12, 19, 13, 15, 12],
                backgroundColor: [
                    '#9333EA',
                    '#A855F7',
                    '#C084FC',
                    '#9333EA',
                    '#A855F7'
                ],
                borderColor: [
                    '#9333EA',
                    '#A855F7',
                    '#C084FC',
                    '#9333EA',
                    '#A855F7'
                ],
                borderWidth: 2
            }]
        };

        const horizontalBarConfig = {
            type: 'bar',
            data: horizontalBarData,
            options: {
                indexAxis: 'y',
                elements: {
                    bar: {
                        borderWidth: 2,
                    }
                },
                responsive: true,
                plugins: {
                    legend: {
                        position: 'right',
                    },
                    title: {
                        display: true,
                        text: 'Productividad'
                    }
                }
            }
        };

        const horizontalBarChart = new Chart(document.getElementById('horizontalBarChart'), horizontalBarConfig);

        const lineData = {
            labels: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo'], 
            datasets: [{
                label: 'Ventas',
                data: [10, 15, 8, 12, 14], 
                borderColor: '#9333EA',
                backgroundColor: '#C084FC',
                borderWidth: 1,
                fill: false
            }]
        };

const lineConfig = {
    type: 'line',
    data: lineData,
    options: {
        responsive: true,
        plugins: {
            legend: {
                position: 'top',
            },
            title: {
                display: true,
                text: ''
            }
        }
    }
};

const lineChart = new Chart(document.getElementById('lineChart'), lineConfig);
</script>

<script>
    fetch('/leads/data')
        .then(response => response.json())
        .then(data => {
            const ctx = document.getElementById('leadsChart').getContext('2d');
            const labels = data.map(lead => lead.name); // Asumiendo que tus leads tienen un campo 'name'
            const values = data.map(lead => lead.value); // Asumiendo que tus leads tienen un campo 'value'

            new Chart(ctx, {
                type: 'bar', // Puedes cambiar el tipo de gráfica según tus necesidades
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Leads Data',
                        data: values,
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        })
        .catch(error => {
            console.error('Error al cargar los datos de los leads:', error);
        });
</script>


<%- include('../includes/foot.ejs') %>
